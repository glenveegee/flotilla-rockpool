
$color-navy: #4566AD;
$color-yellow: #F1C304;
$color-orange: #DB9800;
$color-blue: #00B0B2;
$color-green: #02B186;
$color-red: #ED1558;
$color-purple: #9879D3;
$color-grey: #787980;

$color-darkest-navy: #132240;
$color-dark-navy: #182B54;

@font-face {
    font-family: 'flotilla-regular';
    src:url('fonts/flotilla-regular-webfont.eot?-moe4l1');
    src:url('fonts/flotilla-regular-webfont.eot?#iefix-moe4l1') format('embedded-opentype'),
        url('fonts/flotilla-regular-webfont.woff?-moe4l1') format('woff'),
        url('fonts/flotilla-regular-webfont.ttf?-moe4l1') format('truetype'),
        url('fonts/flotilla-regular-webfont.svg?-moe4l1#boo') format('svg'),
        url('fonts/flotilla-regular-webfont.otf') format('otf');

    font-weight: normal;
    font-style: normal;
}

html, body {
    width:100%;
    height:100%;
    padding:0;
    margin:0;
}

h1, h2, h3, h4, .name {
    font-family:Roboto;
}

h2 {
    font-size: 18pt;
    font-weight: 700;
    color:#787980;
    margin:0;
    padding:0;
}

body {
    background-color:$color-darkest-navy;
}

.container > header {
    background-color:$color-dark-navy;
    overflow:hidden;
}

.container > header {
    margin-bottom: -15px;
    padding-top: 20px;
}
.mainnav {

    i:after {
        font-family: flotilla-regular;
        font-style: normal;
        position: relative;
        font-size: 30px;
        top: 3px;
        line-height: 0;
    }
    ul, li {
        margin:0;
        padding:0;
        list-style:none;
        display:inline-block;
    }
    ul {
        font-size:0;
    }
    li {
        margin:5px 5px 5px 0px;
        font-size:14px;
        padding:14px;
        color:#FFF;
        cursor:pointer;
        border-radius:5px;

        &:hover i, i {background:transparent;}


        &.pull-right {
            float:right;
        }
        &.logo {
            margin-left:5px;
            padding:0;
            i:after {
                font-size: 50px;
                top: 7px;
            }
        }
    }
}

.center { text-align: center; }
.right { text-align: right; }

.block { 
    position: relative;
    margin: 12px 0px;
    height:72px;
}

.rulegroup {
    position:relative;
    display:block;
}

.rule {
    margin: 10px 0;

    .toggle, .delete {
        position:absolute;
        top:10px;
        left:-16px;
    }
    .toggle {
        span {
            font-style: normal;
            font-size: 30px;
            letter-spacing: normal;
            line-height: 72px;
            display: block;
            text-indent: 6px;

            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none; 
            -moz-user-select: none; 
            -ms-user-select: none;
            user-select: none;   
        }
        i {
            background-color:#F1C304;
            border-top-left-radius:0;
            border-bottom-left-radius:0;
        }
    }
    .delete {
        left:auto;
        right:-72px;
        i {
            background-color:#ED1457;
            border-top-right-radius:0;
            border-bottom-right-radius:0;
        }
    }
}

//i img {max-width:100%;width:100%;height:auto;margin:0 auto;}

.palette.converter hr {
    display:block;
    width:100%;
    clear:both;
    padding:0; 
    margin-top:0;
    margin-bottom:15px;
    border:none;
    border-top:2px solid rgba(255,255,255,0.5);
}

.block i, .toggle i, .delete i, .icon-palette i, .palette i, .add-manual i, i.toggle {
    position: relative;
    display: block;
    width: 72px;
    height: 72px;
    border-radius: 36px;
    background-color: #787980;
    color:#FFF;
    font-size:72px;
    line-height:72px;
    text-align:center;
    cursor:pointer;
    z-index:1;

    &:after {
        width:72px;
        height:72px;
        line-height:56px;
        font-size:87px;
        text-align:center;
        position:absolute;
        left:0;
        top:0;
        font-family:flotilla-regular;
        font-style:normal;
        color:#FFF;
    }
}

.add-manual {
    position:absolute;
    right:15px;
    bottom:-34px;
    height:72px;
    color:#FFFFFF;
    font-size:18px;
    padding-right:82px;
    
    i {
        background-color: #ED1558;
        position:absolute;
        right:0;
        bottom:0;
    }

    span {
        position: relative;
        top: 44px;
    }
}

/*
############################################ Icons ############################################
*/

@mixin icon($name, $char){
    i.icon-#{$name}:after {content:$char;}
}

/* Real Inputs */
@include icon("weather","B");
@include icon("number","N");
@include icon("joystick","J");
@include icon("dial","D");
@include icon("slider","S");
@include icon("color","C");
@include icon("colour","C");
@include icon("motion","m");
@include icon("touch","T");
@include icon("light","L");
@include icon("motor","M");
@include icon("matrix","n");
@include icon("rainbow","R");

/* Virtual Inputs */
@include icon("value","v");
@include icon("clock","t");
@include icon("random","r");
@include icon("sine","s");
@include icon("square","q");
@include icon("keyboard","K");
@include icon("variable","V");

/* Converters */
@include icon("halve","h");
@include icon("double","z");
@include icon("invert","i");
@include icon("smooth","a");
@include icon("toggle","O");
@include icon("add","A");
@include icon("subtract","x");
@include icon("min","W");
@include icon("max","w");
@include icon("diff","d");
@include icon("mix","a");
@include icon("gt","g");
@include icon("lt","l");
@include icon("latch","h");

/* Utilities */
@include icon("peek","P");
@include icon("poke","p");
@include icon("dock","f");
@include icon("flotilla","F");
@include icon("help","H");
@include icon("clear","c");

.block i {
    margin-left:-36px;
    left: 50%;
}

i .name {
    height: 22px;
    width: 100%;
    position: absolute;
    top: 72px;
    display:block;
    span {
        background:#FFF;
        width:18px;
        height:18px;
        border-radius:9px;
        color:$color-darkest-navy;
        display:inline-block;
        line-height:17px;
        font-size: 13px;
        font-weight: 700;
        display:none;
    }
}

i .name, .icon-palette span {
    color:#FFF;
    font-style: normal;
    text-align: center;
    white-space:nowrap;
    text-transform: lowercase;
    font-weight: 300;
    font-size: 16px;
    line-height:22px;
    text-shadow:0px 2px rgba(0,0,0,0.4);
}

.inspector {
    display:none;
    position: absolute;
    line-height: 16px;

    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: right;

    top: 50px;
    left: 60px;
    text-align: left;
    background: #FFF;
    color: #000;
    padding: 0 10px;
    border-radius: 8px;
    height: 16px;
    width: auto;

    white-space:pre;

    -webkit-touch-callout: initial;
    -webkit-user-select: initial;
    -khtml-user-select: initial; 
    -moz-user-select: initial; 
    -ms-user-select: initial;
    user-select: initial;

    &.detail small {display:inline;}

    small {
        display:none;
        font-size:14px;
        margin-left:5px;
        margin-right:-10px;
        padding-right:10px;
        background:#F0F0F0;
        border-left:1px solid #CCC;
        padding-left:5px;
        border-radius:8px;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
    }
}

.input .inspector {
    display: inline-block;
}
.output .inspector {
    display:inline-block;
    left: auto;
    right:60px;
}

footer {
    background-color:$color-darkest-navy;
    padding-bottom:60px;
}


.palette {
    z-index: 9000;
    display:block;
    width:auto;
    height:100%;
    max-width:760px;
    margin:20px auto;
    position:relative;
    margin-top:40px;

    header {
        text-align:center;

        h1 {
            color:#FFFFFF;
            font-size:24pt;
            padding:.67em 0;
            margin:0;
        }
    }

    &.input:before, &.output:before {
        content:'';
        width:240px;
        height:240px;
        position:absolute;
        left:50%;
        margin-left:-120px;
        background:url('images/flotilla-dock.png') no-repeat center center;
        background-size:cover;
        top:-160px;
        z-index:2;
    }

    &.input, &.output {
        .connected-modules {
            padding-top: 140px;
        }
    }

    &.host-picker, 
    &.save-load,
    &.personalise,
    &.confirm {
        border-radius:20px;
        background:#00B0D2;
    }

    &.save-load,
    &.personalise,
    &.confirm {
        border-radius:20px;
        background:#224280;
        margin-bottom:36px;
    }

    &.personalise {
        padding-bottom:30px;
    }

    &.save-load {
        li {
            position:relative;
            &:nth-child(odd) {
                background: #195E95;
            }
        }
        .delete {
            background-color:#ED1457;
        }
        .download {
            background-color:#02B186;
            position:absolute;
            right:67px;

            &:before {
                content: '';
                display:block;
                background:transparent;
                width:0;
                height:0;
                border: 21px solid transparent;
                border-top-color: #FFF;
                position: absolute;
                left: 15px;
                top: 31px;
            }
        }
    }

    .close {
        position:absolute;
        right:-30px;
        top:-30px;
        background:#787980;
        width:60px;
        height:60px;
        border-radius: 30px;
    }
}

.palette .close:before,
.palette .close:after,
i.confirm:before,
i.confirm:after,
i.delete:before,
i.delete:after,
i.cancel:before,
i.cancel:after,
.delete i:before,
.delete i:after {
    width:40px;
    height:10px;
    background:#FFFFFF;
    content:'';
    display:block;
    position:absolute;
    top:25px;
    left:10px;
    transform-origin:20px 5px;
    -webkit-transform-origin:20px 5px;
    transform:rotate(46deg);
    -webkit-transform:rotate(45deg);
}

i.confirm:before,
i.confirm:after,
i.delete:before,
i.delete:after,
i.cancel:before,
i.cancel:after,
.delete i:before,
.delete i:after {
    top:32px;
}

i.confirm {
    -webkit-transition:background-color 0.1s ease-in;
    transition:background-color 0.1s ease-in;

    &:after {
        width: 15px;
        top: 48px;
        left: 5px;
    }
}

.save-load {
    i.delete, i.confirm {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        position:absolute;
        right:-15px;
        top:12px;
    }
}

.palette .close:before,
i.delete:before,
i.confirm:before,
.delete i:before,
i.cancel:before {
    transform:rotate(46deg);
    -webkit-transform:rotate(-45deg);
}


/*
############################################ Host Picker ############################################
*/

.progress {
    position:relative;
    display:block;
    width:100%;
    height:40px;

    span {
        display:block;height:100%;
        -webkit-transition:width 0.2s;
        background:#95c11f;
    }

    strong {
        color:#FFF;
        display:block;
        position:absolute;left:0;top:0;
        width:100%;height:100%;
        line-height:40px;
        text-align:center;
        font-size:20px;
    }
}

.host-picker {
    display: block;
    height:100%;
    min-height:300px;
    margin-bottom:40px;
    padding-bottom:40px;

    .host {
        width:172px;
        display:inline-block;
        line-height:30px;
        text-align:center;
        font-size: 30px;
        color:#FFF;
        margin-left:10px;
        position:relative;
        cursor:pointer;
        padding-bottom:40px;

        .error {
            color:#ffffff;   
            font-size: 12px;
            position: absolute;
            bottom: 0px;
            left: 0px;
            width: 100%;
            text-align: center;

            &:after {
                content: '!';
                border-radius: 50%;
                background: #ED1558;
                width: 40px;
                height: 40px;
                position: absolute;
                left: 50%;
                margin-left: -20px;
                top: -35px;
                font-size: 36px;
                line-height: 40px;
            }

            em {
                font-style:normal;
                text-decoration:underline;
            }
        }

        &:after {
            content:'';
            display:block;
            width:140px;
            height:140px;
            border-radius:70px;

            margin:0 auto;
            margin-top:10px;

            background-image: url('images/flotilla-dock.png');
            background-size: cover;
            background-position: center center;
            background-color: transparent;
        }

        &.update-needed {
            color:rgba(255,255,255,0.6);
        }

        p {
            margin:0;
            padding:0;
            padding-top:0px;
        }

        small {
            font-size:20px;
            display:block;
        }
    }

     .choices {
        padding:10px;
        overflow: hidden;
    }

    .daemon {
        display:inline-block;
        float:left;
        > h3, > p {
            color:#FFF;
            font-size:20px;
            text-align:center;
            display: block;
            margin:10px;
        }
    }

    .none-found {
        margin:0 auto;
        width:247px;
        height:72px;
        background:$color-dark-navy;
        color:#FFFFFF;
        text-align:center;
        line-height:72px;
        border-radius:46px;
        font-size:18px;
        position:relative;

        &:after {
            content:'';
            color: rgba(255,255,255,0.6);
            font-size: 20px;
            margin: 100px auto;
            width: 0.5em;
            height: 0.5em;
            border-radius: 50%;
            position: absolute;
            top:50px;
            left:50%;
            text-indent: -9999em;
            -webkit-animation: load4 1.3s infinite linear;
            animation: load4 1.3s infinite linear;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
        }
    }
}


/*
############################################ Confirm Dialog ############################################
*/


.confirm {
    .choices {
        text-align:center;
        margin-bottom:-36px;
        i {
            margin:0 20px;
        }
    }
    i {
        display:inline-block;
        &.confirm {
            background:$color-red;
            &:hover {
                background:lighten($color-red,5%);
            }
            &:before {
                left:18px;
            }
            &:after {
                left:13px;
            }
        }
        &.cancel {
            background:$color-green;
            &:hover {
                background:lighten($color-green,5%);
            }
            &:before, 
            &:after {
                left:16px;
            }
        }
    }
}

.host-picker, .save-load, .confirm {
    .custom {
        float:left;
        display:block;
        width:200px;
        height:200px;
        font-size: 20px;
        border-radius:10px;
        background:rgba(0,0,0,0.5);
        color:#FFF;

        h3 {
            margin:0;
            padding:10px;
            padding-bottom:0;
        }

        p {
            margin:0;
            padding:10px;
            font-size:16px;
        }

        a {
            margin:0 10px;
            text-decoration:none;
            line-height:30px;
            display:block;
            text-align:center;
            color:#FFF;
            background:#95c11f;
        }

        input {
            border:none;
            color:#FFF;
            font-weight:bold;
            text-align:left;
            padding:10px;
            width:160px;
            margin:0 10px;
            color:#333;
        }
    }
}

.host-picker .custom {
    position:absolute;
    bottom:0;
    right:15px;
    border-bottom-left-radius:0;
    border-bottom-right-radius:0;

    h3 {
        margin-bottom:5px;
        font-size:18px;
    }
}

@-webkit-keyframes load4 {
    0%,
    100% {
    box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;
    }
    12.5% {
    box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;
    }
    25% {
    box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;
    }
    37.5% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;
    }
    50% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;
    }
    62.5% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;
    }
    75% {
    box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;
    }
    87.5% {
    box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;
    }
}
@keyframes load4 {
    0%,
    100% {
    box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;
    }
    12.5% {
    box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;
    }
    25% {
    box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;
    }
    37.5% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;
    }
    50% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;
    }
    62.5% {
    box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;
    }
    75% {
    box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;
    }
    87.5% {
    box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;
    }
}


.saves {
    padding:0px;
    padding-top:0px;
    padding-bottom:30px;
    overflow: hidden;
    overflow:hidden;

    .file-drop-zone {
        border-radius: 10px;
        border: 10px dotted #195E95;
        margin: 0px 10px 10px 10px;
        padding: 15px;
        background: rgba(25, 94, 149, 0.3);
        color: #195E95;
        text-align: center;
        text-transform: lowercase;
        font-size: 30px;
        font-weight: bold;
    }

    ul, li {
        margin:0;
        padding:0;
        list-style:none;
    }
    li {
        padding:10px 0px 10px 10px;
    }
    i {
        display:inline-block;
    }
    span {
        color:#FFFFFF;
        height:72px;
        line-height:72px;
        font-size:22px;
        vertical-align:top;
        padding-left:10px;
    }
}

.file-drop-zone.invalid {
    border-color: #ed1457;
    background: rgba(237, 20, 87, 0.3);
    color: #ed1457;
    transition:background 0.2s, color 0.2s, border-color 0.2s;
}

.save-load .add, .personalise .dockSubmit {
    position: absolute;
    left: 50%;
    bottom:-36px;
    margin-left: -36px;
    background-color:#00AB9B;
}

.save-load, .personalise, .confirm {
    input {
        width: 480px;
        height: 50px;
        line-height: 50px;
        border: 3px solid #00B0D2;
        border-radius: 5px;
        text-align: center;
        font-size: 22px;
        color: #00B0D2;
        margin: 0px auto;
        display: block;
        margin-bottom: 30px; 
    }

    p {
        color:#00B0D2;
        text-align:center;
        margin-top:0;
        padding-top:0;
    }
}



.fancybox-overlay {}
.fancybox-outer, .fancybox-wrap, .fancybox-skin, .fancybox-inner {background:transparent;}
.fancybox-close {display:none;}
.fancybox-opened .fancybox-skin {background: transparent;-webkit-box-shadow:none;box-shadow:none;}

canvas {
    border-top-color:    rgba(255,255,255,0.9); /* strokeStyle */
    border-bottom-color: rgba(255,255,255,0.1); /*  fillStyle  */

    display:block;
    width:100%;
    height:72px;
}

.block .add-input, .block .add-output {
    background:#091224;
}

.block .add-input:before, .block .add-output:before, .add-manual i:before,
.save-load .add:before, .save-load .add:after,
.block .add-input:after, .block .add-output:after, .add-manual i:after  {
    width:52px;
    height:14px;
    background:#FFFFFF;
    content:'';
    display:block;
    position:absolute;
    top:30px;
    left:10px;
    transform-origin:26px 7px;
    -webkit-transform-origin:26px 7px;
}

.block .add-input:before, .block .add-output:before, .add-manual i:before, .save-load .add:before {
    transform:rotate(90deg);
    -webkit-transform:rotate(90deg);
}

/*
############################################ Rules ############################################
*/

.graph {
    background:$color-darkest-navy;
    height: 72px;
    width: 100%;
    position: absolute;
    left: 50%;
    top:0;
}

.pipe {
    border-radius:0;
    padding:72px 0;
    box-sizing:border-box;

    width: 72px;
    position: absolute;
    left: 50%;
    margin-left:-36px;
    border-bottom-right-radius: 36px;
    border-top-right-radius: 36px;

    span {
        width:100%;
        height:100%;
        display:block;
        position: relative;
        background:$color-darkest-navy;

        &:before, &:after {
            content: '';
            width:36px;
            height:72px;;
            position: absolute;
            right:0px;
            background:$color-darkest-navy;
        }

        &:before {
            top:-72px;
            bottom:auto;
            border-top-right-radius: 36px;
        }

        &:after {
            bottom:-72px;
            top:auto;
            border-bottom-right-radius: 36px;
        }
    }
}

/* Overlays, Palettes and modals */

.fancybox-overlay, .modal {
    background-image:none;
    background-color:rgba(0, 0, 0, 0.90);
}


/*
############################################ IO Indicators ############################################
*/

.controls {
    padding-top:20px;
    text-align: center;

    .add-rule {
        height: 44px;
        border-radius: 22px;
        display: inline-block;
        background: #02B186;
        font-size: 25px;
        line-height: 44px;
        margin: 0 auto;
        color: #FFF;
        cursor: pointer;
        padding: 0 15px;

        &:hover {
            background:lighten($color-green,5%);
        }
    }
}
/*
.active-inputs, .active-outputs {
    width:76px;
    display:block;
    position:relative;
    left:50%;
    margin-top:10px;
    margin-left:-38px;

    ul, li {
        list-style:none;
        margin:0;
        padding:0;
    }

    li {
        display:inline-block;
        width:15px;
        height:15px;
        border-radius:50%;
        background:#091224;
        margin-right:4px;
        margin-bottom:4px;

        &.on {
            background:#787980;
        }
    }
}
*/

/*
############################################ Pop-up Menus ############################################
*/

.popup {
    border-top:5px solid #333333;
    z-index:10;
    margin-top:25px;
    position:absolute;
    top:72px;

    ul, li {
        list-style:none;
        margin:0;
        padding:0;
    }
}

.above .popup {
    border-top:0;
    border-bottom:5px solid #333333;
    z-index:10;
    margin-top:0px;
    margin-bottom:25px;
    top:-78px;
}

.active.selected {
    i:before {
        content:'';
        border:20px solid transparent;
        border-bottom-color:#333333;
        position:absolute;
        top:57px;
        margin-left:-20px;
        left:50%;
    }

    &.above {
        i:before {
            border-bottom-color:transparent;
            border-top-color:#333333;
            position:absolute;
            top:-28px;
        }
        span {
            display:block;
        }
    }
    span {
        display:none;
    }
}

.popup {
    ul {
        white-space: pre;
    }
    li {
        display:inline-block;
        background:#224280;
        color:#FFFFFF;
        line-height: 40px;
        margin-left: 5px;
        margin-top: 5px;
        cursor:pointer;
        cursor:hand;
        vertical-align:top;
        font-weight:300;
        text-transform: lowercase;
        font-size:16px;
        padding: 0 20px;

        &.button {
            border-radius:10px;
            position:relative;

            &:before {
                width: 100%;
                height: 100%;
                content: '';
                display: block;
                background: #FFF;
                position: absolute;
                left: 0;
                top: 0;
                border-radius: 10px;
                margin: 0;

                /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#ffffff+13,ffffff+100&0+1,1+13,0+100 */
                background: -moz-linear-gradient(top,  rgba(255,255,255,0) 1%, rgba(255,255,255,0.5) 13%, rgba(255,255,255,0) 100%); /* FF3.6-15 */
                background: -webkit-linear-gradient(top,  rgba(255,255,255,0) 1%,rgba(255,255,255,0.5) 13%,rgba(255,255,255,0) 100%); /* Chrome10-25,Safari5.1-6 */
                background: linear-gradient(to bottom,  rgba(255,255,255,0) 1%,rgba(255,255,255,0.5) 13%,rgba(255,255,255,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
                filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#00ffffff',GradientType=0 ); /* IE6-9 */
            }
        }
    }
    .slider {
        padding:0;
        position: relative;
        width:400px;
        height:40px;

        span {
            position:absolute;
            display:block;
            top:1px;
            height:38px;
            width:1px;
            background:rgba(0,0,0,0.2);
            margin-top:0;
        }
        div {
            background:#95c11f;
            position:absolute;
            left:0;
            top:0;
            height:40px;
        }
        strong {
            position:absolute;
            left:0;
            top:0;
            width:100%;
            text-align:center;
            z-index:1;
        }
    }
}

.above .popup li {
    margin-top:0;
    margin-bottom:5px;
}

.popup li:nth-child(1){
    margin-left:0;
}

.block {
    .popup {
        left:50%;
        top:15px;
        margin-left:60px;
        margin-top:0;
        border-top:0;
        padding:0 5px;

        li {margin-top:0;}
        &:before {
            content:'';
            border:20px solid transparent;
            border-right-color:#333333;
            position:absolute;
            top:0px;
            left:-40px;
        }
    }
    &.output .popup {
        left:auto;
        right:50%;
        margin-left:0;
        margin-right:60px;
        &:before {
            content:'';
            border:20px solid transparent;
            border-left-color:#333333;
            position:absolute;
            top:0px;
            left:auto;
            right:-40px;
        }
    }
}

.blackout {
    display:block;
    width:100%;
    height:100%;
    background: rgba(0,0,0,0.8);
    left:0;
    top:0;
    position:fixed;
    z-index:100;
    display:none;
}

.blackedout .blackout {
    display:block;
}

#rules .block.selected i, #rules .block.selected .popup {
    z-index:200;
}
#rules .block.selected i .inspector {display:none;}

/* Config Slider */

.connected-modules, .virtual-modules, .modifiers {
    display:block;
    background:#404040;
    border-radius:20px;
    padding:30px;
    position: relative;

    &:before {
        content:'';
        position:absolute;
        width:100%;
        height:50px;
        border-radius:20px;
        bottom:-10px;
        background-color:#262626;
        left:0px;
        z-index:-1;
    }
}

.modifiers {
    padding-bottom:10px;

    .icon-palette > div {
        margin-bottom:20px;
    }
}

.virtual-modules {
    background:$color-darkest-navy;
    margin-top:20px;

    &:before {
        background:#0B1526;
    }
}

.greyout {
    .connected-modules {
        background:#151515;
        &:before {
            background:#111111;
        }
    }

    .virtual-modules {
        background:#090F1D;
        &:before {
        background:#050A13;
        }
    }

    .icon-palette > div {
        opacity:0.1;
        -webkit-filter: blur(1px);
    }

    .icon-palette > div.selected {
        position: relative;
        z-index: 1
    }

    .icon-palette > div.active:hover {
        opacity:0.2;
        -webkit-filter: none;
    }

    .icon-palette > div.selected,
    .icon-palette > div.selected:hover{
        opacity:1.0;
        -webkit-filter: none;
    }
}

.icon-palette {
    span {
        display:block;
        color:#FFF;
        text-align:center;
        margin-top:5px;
    }
    > div {
        display: inline-block;
        zoom: 1;
        letter-spacing: normal;
        word-spacing: normal;
        vertical-align: top;
        text-rendering: auto;
        width: 12.5%;
        position: relative;
        height:95px;
    }
    i {
        margin: 0 auto;
    }
}

.channels .color-grey {
    &.disabled i {
        position:relative;
        background-color:#1C1C1C;
        border:2px solid #1C1C1C;
        overflow:hidden;
        box-sizing:border-box;

        & :after {
            content:'';
            background-color:#292929;
            width:72px;
            height:72px;
            border-radius:50%;
            position:absolute;
            left:-2px;
            top:8px;
        }
    }

    i {
        color:#404040;
        background-color:#555555;
    }

    span {
        color:#555555;
    }
}

.config-slider {
    background: #333;
    height: 72px;
    margin: 10px 87px 25px 87px;
    position:relative;
    background-image: linear-gradient(90deg, transparent 99%, rgba(0, 0, 0, .2) 100%);
    background-size:10.1%;
    background-position:0 0;

    div {
        height: 72px;
        width:50%;
        background:#02B186;
    }
    span.status {
        width:100%;
        position:absolute;
        left:0;
        top:0;
        text-align:center;
        line-height:72px;
        color:#FFFFFF;
        font-size:20pt;
    }

    .icon-on, .icon-off {
        position:absolute;
        top:0;
        left:-77px;
    }

    .icon-off {
        border-top-right-radius:0px;
        border-bottom-right-radius:0px;
    }

    .icon-on {
        right:-77px;
        left:auto;
        border-top-left-radius: 0px;
        border-bottom-left-radius: 0px;
    }

    .current, .icon-off {
        background:#01A176;
    }
}

.configure-widget .save {
    margin-top:10px;
}

/*
############################################ Options ############################################
*/

/*
.options {
    position:fixed;
    top:auto;
    left:0;
    width:100%;
    bottom:0px;
    height:72px;
    overflow:hidden;
    z-index:10;
    pointer-events:none;

    &.toggle, & {
        transition:top 0.2s ease-in,height 0.2s ease-in;
    }

    .container {
        background:#00B0D1;
        margin:0 20px;
        border-top-left-radius: 20px;
        border-top-right-radius: 20px;
        margin:0 auto;
        max-width:760px;
        height:153px;
        margin-top:72px;
        padding-top:30px;
    }

    .toggle {
        width:72px;
        height:72px;
        border-radius:36px;
        border-bottom-left-radius:0px;
        border-bottom-right-radius:0px;
        background:#00B0D1;
        left:50%;
        margin-left:-36px;
        top:0px;
        position:absolute;
    }

    .toggle, .active {
        pointer-events:auto;
    }

    .toggle img {
        max-width: 36px;
        margin: 16px auto;
        display: block;
    }

    &.open .toggle {
        top:36px;
        cursor:pointer;
    }

    &.open {
        height:225px;
    }
}
*/

/*
############################################ Colours ############################################
*/

@mixin colour-setting($name, $color) {
    .color-#{$name} {
        i, li {
            background-color:$color;
        }
        li:hover {
            background-color:lighten($color,10%);
        }
    }

    .mainnav .color-#{$name} {
        background-color:$color;
        &:hover {
            background-color:lighten($color,10%);
        }
    }

    .color-#{$name}.block .popup:before {
        border-right-color:$color;border-left-color:$color;
    }

    .color-#{$name}.active.selected i:before,
    .color-#{$name}.above .popup {
        border-bottom-color:$color;
    }

    .color-#{$name}.above.active.selected i:before,
    .color-#{$name} canvas, .color-#{$name} .popup {
        border-top-color:$color;
    }

    .color-#{$name}.above.active.selected i:before {
        border-bottom-color:transparent;
    }
}

@include colour-setting("navy", $color-navy);
@include colour-setting("yellow", $color-yellow);
@include colour-setting("orange", $color-orange);
@include colour-setting("blue", $color-blue);
@include colour-setting("green", $color-green);
@include colour-setting("red", $color-red);
@include colour-setting("purple", $color-purple);
@include colour-setting("grey", $color-grey);


/* Hack to set line and fill colours of graphs in CSS */
.generators canvas {
    border-top-color:    rgba(0, 159, 227, 1.0); /* strokeStyle */
}
.decider canvas {
    border-top-color:    rgba(149, 30, 128, 1.0); /* strokeStyle */
}
.converter canvas {
    border-top-color:    rgba(229, 0, 81, 0.9); /* strokeStyle */
}

/*
############################################ Disabled Rules ############################################
*/

#rules {

    padding-bottom: 30px;
    overflow: hidden;

    background-color:$color-dark-navy;

    background-image: url(images/tiny-waves.png);
    background-position: bottom center;
    background-repeat: repeat-x;
    background-size: 48.5px 10px;

    .block.output .popup:before {border-right-color:transparent;}
    .block.input .popup:before, .block.converter .popup:before {border-left-color:transparent;}

    .rulegroup {
        .block i,
        .toggle i,
        .graph,
        .pipe span,
        .pipe span:before,
        .pipe span:after {
            -webkit-transition: background-color linear 0.1s;
            transition: background-color linear 0.1s;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none; 
            -moz-user-select: none; 
            -ms-user-select: none;
            user-select: none;   
        }

        .toggle i .on,
        .toggle i .off {display:none;}

        .delete {
            -webkit-transition: right linear 0.1s;
        }

        // Pause button
        .toggle i {
            position:relative;
            &:before, &:after {
                content:'';
                display:block;
                width:10px;
                height:30px;
                background:#FFF;
                display:block;
                position:absolute;
                left: 24px;
                top: 21px;
           }
           &:after {
                left: 44px;
           }
        }

        &.off {
            /*.toggle i .off {
                display:block;
            }*/

            .delete {
                right:-16px;
                -webkit-transition: right linear 0.1s;
            }

            // Play Button
            .toggle i {
                &:before, &:after {
                    width:0;
                    height:0;
                    border:15px solid transparent;
                    border-left-color: mix($color-darkest-navy,#FFF,50%);
                    background: transparent;
                    left: 30px;
                    border-left-width: 24px;
               }
               &:after {display:none;}
            }

            canvas {display:none;}
            .block i,
            .toggle i,
            .graph,
            .pipe span,
            .pipe span:before,
            .pipe span:after {
                background-color:$color-darkest-navy;
                -webkit-transition: background-color linear 0.1s;
                transition: background-color linear 0.1s;
            }

            .toggle i:hover {
                &:before, &:after {
                    border-left-color: #FFF;
                }
            }

            i:after, i .name {color:mix($color-darkest-navy,#FFFFFF,50%);}

            i .name {display:none;}

            .block .inspector,
            .empty .name,
            .none .name {display:none;}

        }
    }
}

@media(max-width:860px){
    .palette .close {
        right:10px;
    }
}

@media(max-width:719px){
    .palette div i, .palette div i:after {
        width: 50px;
        height: 50px;
        border-radius: 25px;
        font-size: 50px;
        line-height: 50px;
    }
    .icon-palette span {
        font-size:12px;
    }
}
@media(min-width:720px){
    .connected-modules .icon-palette > div {
        &.active:before {
            content: '';
            display: block;
            border-left: 10px solid #00B0B2;
            width: 0;
            position: absolute;
            top: -27px;
            left: 40px;
            transform-origin: 5px 0;
            -webkit-transform-origin: 5px 0;
        }

        &:nth-of-type(1).active:before,
        &:nth-of-type(2).active:before,
        &:nth-of-type(3).active:before,
        &:nth-of-type(4).active:before {
            transform: rotate(224deg);
            -webkit-transform: rotate(224deg);
            height: 240px;
        }

        &:nth-of-type(5).active:before,
        &:nth-of-type(6).active:before,
        &:nth-of-type(7).active:before, 
        &:nth-of-type(8).active:before {
            transform: rotate(-224deg);
            -webkit-transform: rotate(-224deg);
            height: 240px;
        }

        &:nth-of-type(3).active:before,
        &:nth-of-type(6).active:before {
            top: -44px;
            height: 80px;
        }

        &:nth-of-type(4).active:before,
        &:nth-of-type(5).active:before {
            top: -50px;
            height: 40px;
        }
        &.active:after {
            content: '';
            display: block;
            border-left: 10px solid #00B0B2;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            width: 0;
            height: 30px;
            position: absolute;
            top: -32px;
            left: 40px;
        }

        &:nth-of-type(4).active:after,
        &:nth-of-type(5).active:after {
            top:-55px;
            height:53px;
        }

        &:nth-of-type(3).active:after,
        &:nth-of-type(6).active:after {
            top:-49px;
            height:47px;
        }
    }
}
